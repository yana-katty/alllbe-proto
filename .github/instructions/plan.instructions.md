---
applyTo: "**"
---

# プロジェクト計画指示書: Alllbe Location Based Entertainment プラットフォーム

## 戦略的優先順位

### Phase 1: Foundation（基盤構築）- 3-4ヶ月
**目標**: MVP として最低限の Experience 作成・予約機能を実現

#### 必須機能
1. **Organization 管理**: WorkOS SSO 統合、基本的な組織登録・管理
2. **Experience CRUD**: 日時指定型・期間指定型の基本的な Experience 作成・編集・公開
3. **ユーザー管理**: エンドユーザーのアカウント作成・認証・プロフィール管理
4. **基本予約システム**: 予約・キャンセル・基本的な決済機能
5. **QR コード入場**: 基本的な入場管理と来歴記録

#### 技術的マイルストーン
- [ ] Backend: tRPC + Temporal アーキテクチャの基盤構築
- [ ] Database: Drizzle ORM によるスキーマ設計・マイグレーション
- [ ] Frontend: Next.js 14 による基本的な UI/UX 実装
- [ ] WorkOS: SSO 統合と Organization 管理機能の実装
- [ ] 決済: 基本的な決済プロバイダー統合

### Phase 2: Experience Enhancement（体験強化）- 2-3ヶ月
**目標**: 関連コンテンツとコミュニティ機能でプラットフォームの差別化を実現

#### 重点機能（キラーフィーチャー）
1. **関連コンテンツシステム**: Before/After コンテンツの管理・配信
2. **アクセス権限エンジン**: Public・チケット購入済み・体験済みの条件解除システム
3. **After Experience Circle**: Experience 後の参加者交流機能（重要度：最高）
4. **Experience CMS**: Organization 向けの直感的なコンテンツ管理システム
5. **体験履歴管理**: エンドユーザーの体験済み・予約済み Experience の管理

#### 戦略的重要性
- **After Experience Circle**: 競争優位性の核心、最高品質で実装必須
- **アーティスト優先設計**: UI・料金・機能すべてでクリエイター利益を最優先
- **拡張性**: 将来的なコンテンツタイプ・権限条件の追加に対応

### Phase 3: Scale & Ecosystem（規模拡張・エコシステム）- 3-4ヶ月
**目標**: フライホイール効果の創出、持続的成長エンジンの構築

#### エコシステム機能
1. **高度な分析・レポート**: Organization 向けの詳細な売上・参加者分析
2. **マーケティング自動化**: Experience 宣伝・リマインダー・フォローアップ
3. **クリエイター成長支援**: 収益最適化・ファン育成・クロスプロモーション機能
4. **プラットフォーム統合**: 外部 SNS・メディアとの連携機能
5. **高度な権限・ワークフロー**: 複雑な Organization 運営に対応

## 開発原則・制約

### アーキテクチャ原則
1. **関数型プログラミング**: 純粋関数・不変性・Result 型による安全性重視
2. **オニオンアーキテクチャ**: ドメインロジックを中心とした依存関係の制御
3. **高階関数依存注入**: テスト容易性と疎結合の実現
4. **型安全性**: TypeScript + Zod による実行時・コンパイル時双方の安全性

### 品質基準
- **テストカバレッジ**: 90% 以上（特にビジネスロジック層）
- **パフォーマンス**: API レスポンス 200ms 以内（95パーセンタイル）
- **可用性**: 99.9% アップタイム目標
- **セキュリティ**: Enterprise Ready、GDPR 準拠、WorkOS SSO

### ビジネス制約
- **アーティスト第一**: すべての機能・価格決定でクリエイター利益を最優先
- **Market Fit 重視**: 最初の 100 人のクリエイターとの密接な協働
- **フライホイール設計**: 単なるファネルではなく自己強化サイクルの構築

## 技術的負債管理

### 許容可能な負債（Phase 1）
- **UI/UX 完成度**: MVP として最低限、後で改善
- **決済機能**: 基本機能のみ、高度な機能は Phase 2 以降
- **分析・レポート**: 基本的な管理画面のみ

### 絶対回避すべき負債
- **アーキテクチャ設計**: 拡張性を犠牲にした短期的解決は禁止
- **セキュリティ**: Enterprise Ready に必要なセキュリティ水準の妥協禁止
- **データモデル**: 後での変更が困難な基本的なエンティティ設計の妥協禁止

## 成功指標（KPI）

### Phase 1 目標
- **技術的指標**: 
  - 基本機能の完全動作
  - テストカバレッジ 90% 達成
  - API パフォーマンス目標達成
- **ビジネス指標**: 
  - 10 組織の登録・利用
  - 50 Experience の作成
  - 200 予約の処理

### Phase 2 目標
- **技術的指標**: 
  - Experience Circle 機能の安定動作
  - 関連コンテンツ配信の確実性
- **ビジネス指標**: 
  - 50 組織の活発利用
  - Experience 完了後の Experience Circle 参加率 70% 以上
  - アーティスト満足度調査での高評価

### Phase 3 目標
- **エコシステム指標**: 
  - 成功クリエイターによる新規クリエイター紹介率
  - プラットフォーム内でのクロスプロモーション効果
  - フライホイール効果の定量的確認

## リスク管理

### 高リスク項目
1. **After Experience Circle の UX**: キラーフィーチャーの失敗は致命的
2. **WorkOS 統合の複雑性**: Enterprise Ready 要件との整合性
3. **マルチテナント データ分離**: Organization 間のセキュリティ確保
4. **決済・法務コンプライアンス**: 日本市場での法的要件遵守

### 軽減策
- **プロトタイプ重視**: 特に UI/UX が重要な機能は早期プロトタイプ作成
- **段階的ロールアウト**: 機能リリースは段階的、フィードバック重視
- **専門家協力**: 法務・決済の専門知識が必要な領域での外部協力
- **継続的テスト**: 自動テスト + 手動テストの組み合わせ

## 今後の TODO 管理方針

### 短期 TODO（1-2週間）
- 実装中の機能の完成・テスト・デプロイ
- 緊急のバグ修正・セキュリティ対応
- 次週の機能開発準備

### 中期 TODO（1-2ヶ月）
- Phase 内でのマイルストーン達成
- アーキテクチャ改善・リファクタリング
- パフォーマンス・品質向上

### 長期 TODO（3-6ヶ月）
- Phase 間の移行計画
- 技術的負債の解消
- 新技術導入・アーキテクチャ進化

### 戦略的 TODO（6ヶ月以上）
- フライホイール効果の測定・改善
- 新市場・新機能領域の検討
- 競合分析・差別化戦略の調整

## 定期レビュー・調整

### 週次レビュー
- 短期 TODO の進捗確認
- 技術的課題・ブロッカーの解決
- 品質指標の確認

### 月次レビュー
- Phase 目標に対する進捗評価
- KPI の測定・分析
- リスク項目の見直し

### 四半期レビュー
- Phase 間の移行判定
- 戦略的目標の見直し
- 競合状況・市場変化への対応調整

この計画書は、Alllbe プロジェクトの戦略的方向性と実行計画の基準となります。実装時は常にこれらの優先順位と制約を考慮して開発を進めてください。